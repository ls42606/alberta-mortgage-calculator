import{j as e,S as i}from"./index-uaoDt4Ng.js";import{b as he,r as n}from"./react-vendor-Cmhfrx8h.js";import{C as ue}from"./CalculatorLayout-D5rLodfz.js";import{D,U as ge,i as be,H as y,P as fe,e as ye}from"./ui-vendor-BmTIP1pC.js";import"./router-vendor-Crb2vDvM.js";const pe=he.memo(()=>{const[x,E]=n.useState(85e3),[h,L]=n.useState(500),[r,Q]=n.useState(5e4),[p,U]=n.useState(5.5),[u,O]=n.useState(25),[j,J]=n.useState(3e3),[N,K]=n.useState(150),[P,W]=n.useState(0),[t,S]=n.useState({maxPurchasePrice:0,maxMortgageAmount:0,monthlyPayment:0,gdsRatio:0,tdsRatio:0,qualifyingRate:0,cmhcPremium:0,qualifies:!1}),A=n.useCallback(()=>{const s=x/12;if(s<=0){S({maxPurchasePrice:0,maxMortgageAmount:0,monthlyPayment:0,gdsRatio:0,tdsRatio:0,qualifyingRate:0,cmhcPremium:0,qualifies:!1});return}const c=Math.max(p+2,5.25),Y=j/12,Z=N,ee=P*.5,T=Y+Z+ee;let o=0,v=0,g=3e6;for(let m=0;m<100;m++){const a=(v+g)/2;if(g-v<100)break;let b;if(a<=5e5?b=a*.05:a<1e6?b=5e5*.05+(a-5e5)*.1:b=a*.2,r<b){g=a;continue}const k=r/a,C=k>=.2,ne=C?.45:.39,oe=C?.5:.44;let _=0;const z=a-r;if(!C&&a<1e6){const f=1-k;let d=0;f>.9?d=.04:f>.85?d=.031:f>.8?d=.028:f>.75?d=.024:d=.018,_=z*d}const ie=z+_,B=Math.pow(1+c/200,1/6)-1,me=u*12,X=ie*B/(1-Math.pow(1+B,-me))+T,de=X+h,ce=X/s,xe=de/s;ce<=ne&&xe<=oe?(o=a,v=a):g=a}const I=r/o,w=I>=.2,q=o>0?o-r:0;let R=0;if(!w&&o<1e6&&o>0){const m=1-I;let a=0;m>.9?a=.04:m>.85?a=.031:m>.8?a=.028:m>.75?a=.024:a=.018,R=q*a}const M=q+R,F=Math.pow(1+c/200,1/6)-1,te=u*12,$=M>0?M*F/(1-Math.pow(1+F,-te)):0,G=$+T,se=G+h,H=s>0?G/s:0,V=s>0?se/s:0,ae=w?.45:.39,re=w?.5:.44,le=H<=ae&&V<=re&&o>0;S({maxPurchasePrice:Math.round(o),maxMortgageAmount:Math.round(M),monthlyPayment:Math.round($),gdsRatio:parseFloat((H*100).toFixed(2)),tdsRatio:parseFloat((V*100).toFixed(2)),qualifyingRate:c,cmhcPremium:Math.round(R),qualifies:le})},[x,h,r,p,u,j,N,P]);n.useEffect(()=>{A()},[A]);const l=n.useMemo(()=>{const s=new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:0,maximumFractionDigits:0});return c=>s.format(c)},[]);return e.jsxs(ue,{title:"Home Affordability Calculator",description:"Determine how much house you can afford based on your income, debts, and down payment. Calculate GDS and TDS ratios to ensure you qualify for your mortgage.",icon:D,color:"from-brand-blue to-blue-600",canonicalPath:"/calculators/affordability",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 sm:p-8 shadow-xl",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-6 flex items-center space-x-3",children:[e.jsx(ge,{size:24,className:"text-brand-blue flex-shrink-0"}),e.jsx("span",{children:"Income & Debts"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(i,{label:"Annual Household Income",value:x,min:3e4,max:3e5,step:5e3,onChange:E,formatValue:s=>l(s),icon:D}),e.jsx(i,{label:"Monthly Debt Payments",value:h,min:0,max:3e3,step:50,onChange:L,formatValue:s=>l(s),icon:be})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 sm:p-8 shadow-xl",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-6 flex items-center space-x-3",children:[e.jsx(y,{size:24,className:"text-emerald-600 flex-shrink-0"}),e.jsx("span",{children:"Property & Mortgage"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(i,{label:"Down Payment",value:r,min:25e3,max:2e5,step:5e3,onChange:Q,formatValue:s=>l(s),icon:D}),e.jsx(i,{label:"Interest Rate",value:p,min:2,max:8,step:.1,onChange:U,formatValue:s=>`${s.toFixed(1)}%`,icon:fe}),e.jsx(i,{label:"Amortization Period",value:u,min:5,max:30,step:5,onChange:O,formatValue:s=>`${s} years`,icon:ye}),e.jsx(i,{label:"Annual Property Tax",value:j,min:1e3,max:1e4,step:250,onChange:J,formatValue:s=>l(s),icon:y}),e.jsx(i,{label:"Monthly Heating",value:N,min:50,max:400,step:25,onChange:K,formatValue:s=>l(s),icon:y}),e.jsx(i,{label:"Monthly Condo Fees",value:P,min:0,max:800,step:25,onChange:W,formatValue:s=>l(s),icon:y})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`rounded-2xl border-2 p-6 sm:p-8 shadow-lg ${t.qualifies?"bg-gradient-to-br from-emerald-50 via-emerald-100 to-emerald-50 border-emerald-200":"bg-gradient-to-br from-red-50 via-red-100 to-red-50 border-red-200"}`,children:e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`text-4xl sm:text-5xl font-bold mb-3 ${t.qualifies?"text-emerald-800":"text-red-800"}`,children:l(t.maxPurchasePrice)}),e.jsx("h3",{className:`text-lg sm:text-xl font-bold ${t.qualifies?"text-emerald-800":"text-red-800"}`,children:"Maximum Purchase Price"}),e.jsx("div",{className:`mt-4 inline-flex items-center px-4 py-2 rounded-full text-sm font-bold ${t.qualifies?"bg-emerald-200 text-emerald-800":"bg-red-200 text-red-800"}`,children:t.qualifies?"✓ Qualifies":"✗ May Not Qualify"})]})}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-4 sm:p-6 lg:p-8 shadow-lg",children:[e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Debt Service Ratios"}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-2 gap-1 sm:gap-0",children:[e.jsx("span",{className:"font-semibold text-gray-700 text-sm sm:text-base",children:"GDS Ratio"}),e.jsxs("span",{className:`font-bold text-sm sm:text-base ${t.gdsRatio<=(r/t.maxPurchasePrice>=.2?45:39)?"text-emerald-600":"text-red-600"}`,children:[t.gdsRatio,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 sm:h-4",children:e.jsx("div",{className:`h-3 sm:h-4 rounded-full transition-all duration-500 ${t.gdsRatio<=(r/t.maxPurchasePrice>=.2?45:39)?"bg-emerald-500":"bg-red-500"}`,style:{width:`${Math.min(t.gdsRatio/(r/t.maxPurchasePrice>=.2?45:39)*100,100)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Maximum: ",r/t.maxPurchasePrice>=.2?"45%":"39%"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-2 gap-1 sm:gap-0",children:[e.jsx("span",{className:"font-semibold text-gray-700 text-sm sm:text-base",children:"TDS Ratio"}),e.jsxs("span",{className:`font-bold text-sm sm:text-base ${t.tdsRatio<=(r/t.maxPurchasePrice>=.2?50:44)?"text-emerald-600":"text-red-600"}`,children:[t.tdsRatio,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 sm:h-4",children:e.jsx("div",{className:`h-3 sm:h-4 rounded-full transition-all duration-500 ${t.tdsRatio<=(r/t.maxPurchasePrice>=.2?50:44)?"bg-emerald-500":"bg-red-500"}`,style:{width:`${Math.min(t.tdsRatio/(r/t.maxPurchasePrice>=.2?50:44)*100,100)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Maximum: ",r/t.maxPurchasePrice>=.2?"50%":"44%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 sm:p-8 shadow-lg",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-6",children:"Affordability Breakdown"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Maximum Mortgage"}),e.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-900",children:l(t.maxMortgageAmount)})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Down Payment"}),e.jsx("span",{className:"text-base sm:text-lg font-bold text-emerald-700",children:l(r)})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"CMHC Insurance"}),e.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-900",children:l(t.cmhcPremium)})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Qualifying Rate"}),e.jsxs("span",{className:"text-base sm:text-lg font-bold text-gray-900",children:[t.qualifyingRate.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Monthly Payment"}),e.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-900",children:l(t.monthlyPayment)})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Monthly Income"}),e.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-900",children:l(x/12)})]}),e.jsxs("div",{className:"flex justify-between items-center py-4 pt-6 border-t-2 border-gray-200",children:[e.jsx("span",{className:"text-gray-900 font-bold text-base sm:text-lg",children:"Max Purchase Price"}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-gray-900",children:l(t.maxPurchasePrice)})]})]})]})]})]}),e.jsxs("div",{className:"mt-12 sm:mt-16 bg-gradient-to-r from-gray-50 via-blue-50/50 to-emerald-50/50 rounded-3xl p-8 sm:p-12 border border-gray-200",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6 text-center",children:"Understanding Debt Service Ratios"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[e.jsx("h4",{className:"text-lg font-bold text-emerald-600 mb-3",children:"GDS Ratio (Gross Debt Service)"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"The percentage of your gross monthly income that goes toward housing costs. This includes the mortgage payment (calculated at the stress test rate), property taxes, heating, and 50% of condo fees. Lenders want to see this below 39% for insured mortgages and 45% for uninsured."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[e.jsx("h4",{className:"text-lg font-bold text-brand-blue mb-3",children:"TDS Ratio (Total Debt Service)"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"The percentage of your gross monthly income that goes toward all of your debt obligations. This includes all housing costs from GDS, plus other debts like car loans, credit cards, and lines of credit. Lenders want this below 44% for insured mortgages and 50% for uninsured."})]})]})]})]})});pe.displayName="AffordabilityCalculator";export{pe as default};
