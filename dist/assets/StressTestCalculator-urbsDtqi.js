import{j as e,S as d}from"./index-Beeyq-FO.js";import{r as o}from"./react-vendor-Cmhfrx8h.js";import{C as oe}from"./CalculatorLayout-BSmkn1ba.js";import{d as O,D as m,P as L,r as U,T as ie}from"./ui-vendor-BmTIP1pC.js";import"./router-vendor-CU2yWa0w.js";const be=()=>{const[f,X]=o.useState(85e3),[h,Q]=o.useState(500),[a,Y]=o.useState(1e5),[x,J]=o.useState(5.5),[u]=o.useState(25),[y,K]=o.useState(3e3),[p,W]=o.useState(150),[s,M]=o.useState({stressTestRate:0,maxPurchasePriceContract:0,maxPurchasePriceStress:0,monthlyPaymentContract:0,monthlyPaymentStress:0,gdsRatioContract:0,gdsRatioStress:0,tdsRatioContract:0,tdsRatioStress:0,passesStressTest:!1,qualificationGap:0});o.useEffect(()=>{Z()},[f,h,a,x,u,y,p]);const Z=()=>{const t=f/12;if(t<=0){M({stressTestRate:Math.max(x+2,5.25),maxPurchasePriceContract:0,maxPurchasePriceStress:0,monthlyPaymentContract:0,monthlyPaymentStress:0,gdsRatioContract:0,gdsRatioStress:0,tdsRatioContract:0,tdsRatioStress:0,passesStressTest:!1,qualificationGap:0});return}const j=Math.max(x+2,5.25),D=y/12+p;let i=0,N=0,P=3e6;for(let l=0;l<100;l++){const r=(N+P)/2;if(P-N<100)break;const g=a/r,c=g>=.2,w=c?.45:.39,ae=c?.5:.44;let B=0;const V=r-a;if(!c&&r<1e6){const T=1-g;let b=0;T>.9?b=.04:T>.85?b=.031:T>.8&&(b=.028),B=V*b}const k=V+B,re=u*12,C=Math.pow(1+j/100/2,2/12)-1;let E=0;k>0&&C>0&&(E=k*C/(1-Math.pow(1+C,-re)));const _=E+D,ne=_/t,le=(_+h)/t;ne<=w&&le<=ae?(i=r,N=r):P=r}const A=i>0?a/i:0,S=A>=.2;let F=0;const v=i-a;if(!S&&i<1e6&&v>0){const l=1-A;let r=0;l>.9?r=.04:l>.85?r=.031:l>.8&&(r=.028),F=v*r}const I=v+F,$=(l,r,g)=>{if(l<=0)return 0;const c=Math.pow(1+r/100/2,2/12)-1,w=g*12;return l*c/(1-Math.pow(1+c,-w))},H=$(I,x,u),R=$(I,j,u),G=R+D,q=t>0?G/t*100:0,z=t>0?(G+h)/t*100:0,ee=S?45:39,se=S?50:44,te=q<=ee&&z<=se&&i>0;M({stressTestRate:parseFloat(j.toFixed(2)),maxPurchasePriceContract:0,maxPurchasePriceStress:Math.round(i),monthlyPaymentContract:Math.round(H),monthlyPaymentStress:Math.round(R),gdsRatioContract:0,gdsRatioStress:parseFloat(q.toFixed(1)),tdsRatioContract:0,tdsRatioStress:parseFloat(z.toFixed(1)),passesStressTest:te,qualificationGap:Math.round(R-H)})},n=t=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t);return e.jsxs(oe,{title:"Mortgage Stress Test",description:"Test your mortgage qualification under Bank of Canada stress test rules. See how higher interest rates affect your borrowing capacity and ensure you can handle rate increases.",icon:O,color:"from-orange-500 to-orange-600",canonicalPath:"/calculators/stress-test",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 sm:p-8 shadow-xl",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-6 flex items-center space-x-3",children:[e.jsx(m,{size:24,className:"text-orange-600 flex-shrink-0"}),e.jsx("span",{children:"Income & Debts"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{label:"Annual Household Income",value:f,min:3e4,max:3e5,step:5e3,onChange:X,formatValue:t=>n(t),icon:m}),e.jsx(d,{label:"Monthly Debt Payments",value:h,min:0,max:3e3,step:50,onChange:Q,formatValue:t=>n(t),icon:m})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 sm:p-8 shadow-xl",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-6 flex items-center space-x-3",children:[e.jsx(O,{size:24,className:"text-emerald-600 flex-shrink-0"}),e.jsx("span",{children:"Mortgage Details"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{label:"Down Payment",value:a,min:25e3,max:2e5,step:5e3,onChange:Y,formatValue:t=>n(t),icon:m}),e.jsx(d,{label:"Contract Interest Rate",value:x,min:2,max:8,step:.1,onChange:J,formatValue:t=>`${t.toFixed(1)}%`,icon:L}),e.jsx(d,{label:"Annual Property Tax",value:y,min:1e3,max:1e4,step:250,onChange:K,formatValue:t=>n(t),icon:m}),e.jsx(d,{label:"Monthly Heating",value:p,min:50,max:400,step:25,onChange:W,formatValue:t=>n(t),icon:m})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`rounded-2xl border-2 p-6 sm:p-8 shadow-lg ${s.passesStressTest?"bg-gradient-to-br from-emerald-50 via-emerald-100 to-emerald-50 border-emerald-200":"bg-gradient-to-br from-red-50 via-red-100 to-red-50 border-red-200"}`,children:e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[e.jsx(U,{size:28,className:s.passesStressTest?"text-emerald-600":"text-red-600"}),e.jsxs("h3",{className:`text-xl sm:text-2xl font-bold ${s.passesStressTest?"text-emerald-800":"text-red-800"}`,children:["Stress Test Rate: ",s.stressTestRate,"%"]})]}),e.jsx("div",{className:`inline-flex items-center px-6 py-3 rounded-full text-base sm:text-lg font-bold ${s.passesStressTest?"bg-emerald-200 text-emerald-800":"bg-red-200 text-red-800"}`,children:s.passesStressTest?"✓ Passes Stress Test":"✗ Fails Stress Test"})]})}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 sm:p-8 shadow-lg",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-6",children:"Maximum Purchase Price"}),e.jsx("div",{className:"space-y-4 text-center",children:e.jsxs("div",{className:"p-4 bg-emerald-50 rounded-lg border border-emerald-200",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-2",children:"You Qualify For a Max Purchase Price of:"}),e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-emerald-700",children:n(s.maxPurchasePriceStress)}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"This is the most you can afford under the stress test."})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 sm:p-8 shadow-lg",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-6",children:"Debt Service Ratios"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"GDS Ratio (Stress Test)"}),e.jsxs("span",{className:`font-bold ${s.gdsRatioStress<=(a/s.maxPurchasePriceStress>=.2?45:39)?"text-emerald-600":"text-red-600"}`,children:[s.gdsRatioStress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${s.gdsRatioStress<=(a/s.maxPurchasePriceStress>=.2?45:39)?"bg-emerald-500":"bg-red-500"}`,style:{width:`${Math.min(s.gdsRatioStress/(a/s.maxPurchasePriceStress>=.2?45:39)*100,100)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Maximum: ",a/s.maxPurchasePriceStress>=.2?"45%":"39%"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"TDS Ratio (Stress Test)"}),e.jsxs("span",{className:`font-bold ${s.tdsRatioStress<=(a/s.maxPurchasePriceStress>=.2?50:44)?"text-emerald-600":"text-red-600"}`,children:[s.tdsRatioStress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${s.tdsRatioStress<=(a/s.maxPurchasePriceStress>=.2?50:44)?"bg-emerald-500":"bg-red-500"}`,style:{width:`${Math.min(s.tdsRatioStress/(a/s.maxPurchasePriceStress>=.2?50:44)*100,100)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Maximum: ",a/s.maxPurchasePriceStress>=.2?"50%":"44%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 sm:p-8 shadow-lg",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-6",children:"Monthly Payment Comparison"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"At Contract Rate"}),e.jsx("span",{className:"text-base sm:text-lg font-bold text-emerald-700",children:n(s.monthlyPaymentContract)})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"At Stress Test Rate"}),e.jsx("span",{className:"text-base sm:text-lg font-bold text-orange-700",children:n(s.monthlyPaymentStress)})]}),e.jsxs("div",{className:"flex justify-between items-center py-4 pt-6 border-t-2 border-gray-200",children:[e.jsx("span",{className:"text-gray-900 font-bold text-base sm:text-lg",children:"Payment Buffer"}),e.jsxs("span",{className:"text-lg sm:text-xl font-bold text-red-700",children:["+",n(s.qualificationGap)]})]})]})]})]})]}),e.jsxs("div",{className:"mt-12 sm:mt-16 bg-gradient-to-r from-gray-50 via-blue-50/50 to-emerald-50/50 rounded-3xl p-8 sm:p-12 border border-gray-200",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6 text-center",children:"Understanding the Stress Test"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(U,{size:24,className:"text-orange-600"})}),e.jsx("h4",{className:"text-lg font-bold text-orange-600 mb-3",children:"Purpose"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Ensures borrowers can handle higher interest rates and economic stress without defaulting."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-brand-blue/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(L,{size:24,className:"text-brand-blue"})}),e.jsx("h4",{className:"text-lg font-bold text-brand-blue mb-3",children:"Rate Calculation"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Higher of your contract rate + 2% or the Bank of Canada's minimum qualifying rate (currently 5.25%)."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ie,{size:24,className:"text-emerald-600"})}),e.jsx("h4",{className:"text-lg font-bold text-emerald-600 mb-3",children:"Impact"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Reduces borrowing capacity by 15-20% on average, promoting responsible lending and borrowing."})]})]})]})]})};export{be as default};
